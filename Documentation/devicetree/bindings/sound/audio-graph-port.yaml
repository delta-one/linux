# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/sound/audio-graph-port.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

<<<<<<< HEAD
title: Audio Graph Card 'port'
=======
title: Audio Graph Card 'port' Node Bindings
>>>>>>> b7ba80a49124 (Commit)

maintainers:
  - Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>

select: false

<<<<<<< HEAD
definitions:
  port-base:
    $ref: /schemas/graph.yaml#/$defs/port-base
    properties:
      convert-rate:
        $ref: /schemas/sound/dai-params.yaml#/$defs/dai-sample-rate
      convert-channels:
        $ref: /schemas/sound/dai-params.yaml#/$defs/dai-channels
      convert-sample-format:
        $ref: /schemas/sound/dai-params.yaml#/$defs/dai-sample-format
      mclk-fs:
        $ref: simple-card.yaml#/definitions/mclk-fs

  endpoint-base:
    $ref: /schemas/graph.yaml#/$defs/endpoint-base
    properties:
      mclk-fs:
        $ref: simple-card.yaml#/definitions/mclk-fs
=======
allOf:
  - $ref: /schemas/graph.yaml#/$defs/port-base

properties:
  prefix:
    description: "device name prefix"
    $ref: /schemas/types.yaml#/definitions/string
  convert-rate:
    $ref: "/schemas/sound/dai-params.yaml#/$defs/dai-sample-rate"
  convert-channels:
    $ref: "/schemas/sound/dai-params.yaml#/$defs/dai-channels"
  convert-sample-format:
    $ref: "/schemas/sound/dai-params.yaml#/$defs/dai-sample-format"

patternProperties:
  "^endpoint(@[0-9a-f]+)?":
    $ref: /schemas/graph.yaml#/$defs/endpoint-base
    unevaluatedProperties: false

    properties:
      mclk-fs:
        description: |
          Multiplication factor between stream rate and codec mclk.
          When defined, mclk-fs property defined in dai-link sub nodes are
          ignored.
        $ref: /schemas/types.yaml#/definitions/uint32
>>>>>>> b7ba80a49124 (Commit)
      frame-inversion:
        description: dai-link uses frame clock inversion
        $ref: /schemas/types.yaml#/definitions/flag
      bitclock-inversion:
        description: dai-link uses bit clock inversion
        $ref: /schemas/types.yaml#/definitions/flag
      frame-master:
        description: Indicates dai-link frame master.
        oneOf:
          - $ref: /schemas/types.yaml#/definitions/flag
          - $ref: /schemas/types.yaml#/definitions/phandle
      bitclock-master:
        description: Indicates dai-link bit clock master
        oneOf:
          - $ref: /schemas/types.yaml#/definitions/flag
          - $ref: /schemas/types.yaml#/definitions/phandle
<<<<<<< HEAD
      clocks:
        description: Indicates system clock
        $ref: /schemas/types.yaml#/definitions/phandle
      system-clock-frequency:
        $ref: simple-card.yaml#/definitions/system-clock-frequency
      system-clock-direction-out:
        $ref: simple-card.yaml#/definitions/system-clock-direction-out
      system-clock-fixed:
        $ref: simple-card.yaml#/definitions/system-clock-fixed
=======
>>>>>>> b7ba80a49124 (Commit)

      dai-format:
        description: audio format.
        items:
          enum:
            - i2s
            - right_j
            - left_j
            - dsp_a
            - dsp_b
            - ac97
            - pdm
            - msb
            - lsb
      convert-rate:
<<<<<<< HEAD
        $ref: /schemas/sound/dai-params.yaml#/$defs/dai-sample-rate
      convert-channels:
        $ref: /schemas/sound/dai-params.yaml#/$defs/dai-channels
      convert-sample-format:
        $ref: /schemas/sound/dai-params.yaml#/$defs/dai-sample-format

      dai-tdm-slot-num:
        description: Number of slots in use.
        $ref: /schemas/types.yaml#/definitions/uint32
      dai-tdm-slot-width:
        description: Width in bits for each slot.
        $ref: /schemas/types.yaml#/definitions/uint32
=======
        $ref: "/schemas/sound/dai-params.yaml#/$defs/dai-sample-rate"
      convert-channels:
        $ref: "/schemas/sound/dai-params.yaml#/$defs/dai-channels"
      convert-sample-format:
        $ref: "/schemas/sound/dai-params.yaml#/$defs/dai-sample-format"

>>>>>>> b7ba80a49124 (Commit)
      dai-tdm-slot-width-map:
        description: Mapping of sample widths to slot widths. For hardware
          that cannot support a fixed slot width or a slot width always
          equal to sample width. A matrix of one or more 3-tuples.
        $ref: /schemas/types.yaml#/definitions/uint32-matrix
        items:
          items:
            -
              description: Sample width in bits
              minimum: 8
              maximum: 64
            -
              description: Slot width in bits
              minimum: 8
              maximum: 256
            -
              description: Slot count
              minimum: 1
              maximum: 64

<<<<<<< HEAD
  ports:
    $ref: "#/definitions/port-base"
    unevaluatedProperties: false
    patternProperties:
      "^port(@[0-9a-f]+)?$":
        $ref: "#/definitions/port-base"
        unevaluatedProperties: false
        patternProperties:
          "^endpoint(@[0-9a-f]+)?":
            $ref: "#/definitions/endpoint-base"
            unevaluatedProperties: false

allOf:
  - $ref: "#/definitions/port-base"

patternProperties:
  "^endpoint(@[0-9a-f]+)?":
    $ref: "#/definitions/endpoint-base"
    unevaluatedProperties: false

=======
>>>>>>> b7ba80a49124 (Commit)
additionalProperties: true
